{% set fc = result.fair_checker or {} %}
{% if fc %}
<section class="page-block">
  <h4>üß™ FAIR-Checker</h4>

  <details>
    <summary>Details anzeigen</summary>

    {% if fc.score_overall is not defined or fc.score_overall is none %}
      <p>Kein Ergebnis{% if fc.reason %} ({{ fc.reason }}){% endif %}</p>
    {% else %}
      <p><strong>FAIR-Gesamt:</strong> {{ fc.score_overall|round(1) }}‚Äâ%</p>

      {% if fc.metrics %}
        <div class="fair-list" style="margin-top: 1em;">
          {% set labels = {0:"nicht erf√ºllt", 1:"teilweise erf√ºllt", 2:"vollst√§ndig erf√ºllt"} %}

          {% for m in fc.metrics %}
            {% set group = m.metric[0] if m.metric and m.metric[0] in ["F","A","I","R"] else "?" %}

            <div class="fair-item" style="margin-bottom: 0.75em; padding-bottom: 0.75em; border-bottom: 1px solid rgba(255,255,255,0.2);">
              <div><strong>{{ m.metric }}</strong> ({{ group }})</div>
              <div>Punkte: {{ m.score }}/2</div>
              <div>Bewertung: {{ labels.get(m.score, m.score) }}</div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p>Keine einzelnen FAIR-Metriken verf√ºgbar.</p>
      {% endif %}
    {% endif %}

    <details style="margin-top: 1em;">
      <summary class="no-bold">RAW FAIR JSON</summary>
      <pre style="font-size: 0.85em; white-space: pre-wrap;">{{ fc | tojson(indent=2) }}</pre>
    </details>

  </details>
</section>
{% endif %}

