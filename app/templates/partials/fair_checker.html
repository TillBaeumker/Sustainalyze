{% set fc = result.fair_checker or {} %}
{% if fc %}
<section class="page-block">
  <h4>üß™ FAIR-Checker</h4>

  <details>
    <summary>Details anzeigen</summary>

    {% if fc.score_overall is not defined or fc.score_overall is none %}
      <p>Kein Ergebnis{% if fc.reason %} ({{ fc.reason }}){% endif %}</p>
    {% else %}
      <p>
        <strong>FAIR-Gesamt:</strong> {{ fc.score_overall|round(1) }}‚Äâ%
      </p>

      {% if fc.metrics %}
        <table class="alt" style="margin-top: 1em;">
          <thead>
            <tr>
              <th style="width: 25%">Metrik</th>
              <th style="width: 15%">Punkte</th>
              <th style="width: 60%">Bewertung</th>
            </tr>
          </thead>
          <tbody>
            {% set labels = {0:"nicht erf√ºllt", 1:"teilweise erf√ºllt", 2:"vollst√§ndig erf√ºllt"} %}
            {% for m in fc.metrics %}
              {% set group = m.metric[0] if m.metric and m.metric[0] in ["F","A","I","R"] else "?" %}
              <tr>
                <td><strong>{{ m.metric }}</strong> ({{ group }})</td>
                <td>{{ m.score }}/2</td>
                <td>{{ labels.get(m.score, m.score) }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p>Keine einzelnen FAIR-Metriken verf√ºgbar.</p>
      {% endif %}
    {% endif %}

    <details style="margin-top: 1em;">
      <summary class="no-bold">RAW FAIR JSON</summary>
      <pre style="font-size: 0.85em; white-space: pre-wrap;">{{ fc | tojson(indent=2) }}</pre>
    </details>

  </details>
</section>
{% endif %}
